!function(){$.fn.ideaboxWeather=function(a){var t={modulid:"ideaboxWeather",width:"100%",themecolor:"#069",todaytext:"Today",radius:!0,location:"Newyork",daycount:7,imgpath:"img/",template:"vertical",lang:"en",metric:"C",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayssmall:["Su","Mo","Tu","We","Th","Fr","Sa"]},a=$.extend(t,a);return this.each(function(){function t(){var t=$(a.modulid).width();200>t?$(a.modulid).addClass("ow-small"):$(a.modulid).removeClass("ow-small")}function d(){$.get("http://api.openweathermap.org/data/2.5/forecast/daily?q="+a.location+"&mode=xml&units=metric&cnt="+a.daycount+"&lang="+a.lang,function(t){var d=$(t),n="",e=d.find("name").text();d.find("time").each(function(t){var d=$(this),s=new Date($(this).attr("day")),o=s.getDay(),r="";r="F"==a.metric?Math.round(1.8*d.find("temperature").attr("day")+32)+"°F":Math.round(d.find("temperature").attr("day"))+"°C",n=0==t?"vertical"==a.template?n+'<div class="ow-today"><span><img src="'+a.imgpath+d.find("symbol").attr("var")+'.png"/></span><h2>'+r+"<span>"+i(d.find("symbol").attr("name"))+"</span><b>"+e+" - "+a.todaytext+"</b></h2></div>":n+'<div class="ow-today"><span><img src="'+a.imgpath+d.find("symbol").attr("var")+'.png"/></span><h2>'+r+"<span>"+i(d.find("symbol").attr("name"))+"</span><b>"+e+" - "+a.todaytext+"</b></h2></div>":"vertical"==a.template?n+'<div class="ow-days"><span>'+a.days[o]+'</span><p><img src="'+a.imgpath+d.find("symbol").attr("var")+'.png" title="'+i(d.find("symbol").attr("name"))+'"> <b>'+r+"</b></p></div>":n+'<div class="ow-dayssmall" style="width:'+100/(a.daycount-1)+'%"><span title='+a.days[o]+">"+a.dayssmall[o]+'</span><p><img src="'+a.imgpath+d.find("symbol").attr("var")+'.png" title="'+i(d.find("symbol").attr("name"))+'"></p><b>'+r+"</b></div>"}),$(a.modulid).html(n)})}function i(a){return a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase()}a.modulid="#"+$(this).attr("id"),$(a.modulid).css({width:a.width,background:a.themecolor}),a.radius&&$(a.modulid).addClass("ow-border"),d(),t(),$(window).on("resize",function(){t()})})}}(jQuery);